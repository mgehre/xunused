// This is an LLVM-style lit test that uses FileCheck.
// It creates a tiny two-file project: used.c and unused.c
// Then runs xunused on the temp directory and pipes the output into FileCheck.
// Adjust the CHECK line to match xunused's exact output.
//
// RUN: rm -rf %t && mkdir -p %t
// RUN: echo 'void used() {}' > %t/used.c
// RUN: echo 'int main() { used(); return 0; }' >> %t/used.c
// RUN: echo 'void unused() {}' > %t/unused.c
// RUN: echo '[{"directory":"%t","command":"cc -c %t/used.c","file":"%t/used.c"},{"directory":"%t","command":"cc -c %t/unused.c","file":"%t/unused.c"}]' > %t/compile_commands.json
// RUN: xunused %t/compile_commands.json 2>&1 | FileCheck %s
// CHECK: unused
